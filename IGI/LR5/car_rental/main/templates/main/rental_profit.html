
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>rental profit</title>
</head>
<body>
    <h1>rental profit</h1>
    
    <h2>total profit from confirmed rentals</h2>
    <p>{{ total_profit }} ₽</p>

    <h2>confirmed rentals (confirmed, active, completed)</h2>
    {% if confirmed_rentals %}
    <table>
        <tr>
            <th>id</th>
            <th>client</th>
            <th>car</th>
            <th>start date</th>
            <th>days</th>
            <th>expected return date</th>
            <th>amount</th>
            <th>discount</th>
            <th>total</th>
            <th>status</th>
        </tr>
        {% for rental in confirmed_rentals %}
        <tr>
            <td>{{ rental.id }}</td>
            <td>{{ rental.client.username }}</td>
            <td>{{ rental.car }}</td>
            <td>{{ rental.start_date }}</td>
            <td>{{ rental.days }}</td>
            <td>{{ rental.expected_return_date|date:"d.m.Y" }}</td>
            <td>{{ rental.rental_amount }} ₽</td>
            <td>{{ rental.discount_amount }} ₽</td>
            <td>{{ rental.total_amount }} ₽</td>
            <td>{{ rental.get_status_display }}</td>
        </tr>
        {% endfor %}
    </table>
    {% else %}
    <p>no confirmed rentals</p>
    {% endif %}

    <h2>pending rentals</h2>
    {% if pending_rentals %}
    <table>
        <tr>
            <th>id</th>
            <th>client</th>
            <th>car</th>
            <th>start date</th>
            <th>days</th>
            <th>expected return date</th>
            <th>amount</th>
            <th>discount</th>
            <th>total</th>
            <th>status</th>
        </tr>
        {% for rental in pending_rentals %}
        <tr>
            <td>{{ rental.id }}</td>
            <td>{{ rental.client.username }}</td>
            <td>{{ rental.car }}</td>
            <td>{{ rental.start_date }}</td>
            <td>{{ rental.days }}</td>
            <td>{{ rental.expected_return_date|date:"d.m.Y" }}</td>
            <td>{{ rental.rental_amount }} ₽</td>
            <td>{{ rental.discount_amount }} ₽</td>
            <td>{{ rental.total_amount }} ₽</td>
            <td>{{ rental.get_status_display }}</td>
        </tr>
        {% endfor %}
    </table>
    {% else %}
    <p>no pending rentals</p>
    {% endif %}

    <a href="/" style="margin-right: 15px;">Main Page</a>
</body>
</html>