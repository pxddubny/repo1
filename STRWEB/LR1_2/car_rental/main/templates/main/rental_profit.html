{% extends "base.html" %}

{% block title %}Rental Profit - Car Rental{% endblock %}

{% block header %}Rental Profit{% endblock %}

{% block content %}
<h2>Total Profit from Confirmed Rentals</h2>
<p>{{ total_profit }} ₽</p>

<h2>Confirmed Rentals (Confirmed, Active, Completed)</h2>
{% if confirmed_rentals %}
<table>
    <tr>
        <th>ID</th>
        <th>Client</th>
        <th>Car</th>
        <th>Start Date</th>
        <th>Days</th>
        <th>Expected Return Date</th>
        <th>Amount</th>
        <th>Discount</th>
        <th>Total</th>
        <th>Status</th>
    </tr>
    {% for rental in confirmed_rentals %}
    <tr>
        <td>{{ rental.id }}</td>
        <td>{{ rental.client.username }}</td>
        <td>{{ rental.car }}</td>
        <td>{{ rental.start_date }}</td>
        <td>{{ rental.days }}</td>
        <td>{{ rental.expected_return_date|date:"d.m.Y" }}</td>
        <td>{{ rental.rental_amount }} ₽</td>
        <td>{{ rental.discount_amount }} ₽</td>
        <td>{{ rental.total_amount }} ₽</td>
        <td>{{ rental.get_status_display }}</td>
    </tr>
    {% endfor %}
</table>
{% else %}
<p>No confirmed rentals</p>
{% endif %}

<h2>Pending Rentals</h2>
{% if pending_rentals %}
<table>
    <tr>
        <th>ID</th>
        <th>Client</th>
        <th>Car</th>
        <th>Start Date</th>
        <th>Days</th>
        <th>Expected Return Date</th>
        <th>Amount</th>
        <th>Discount</th>
        <th>Total</th>
        <th>Status</th>
    </tr>
    {% for rental in pending_rentals %}
    <tr>
        <td>{{ rental.id }}</td>
        <td>{{ rental.client.username }}</td>
        <td>{{ rental.car }}</td>
        <td>{{ rental.start_date }}</td>
        <td>{{ rental.days }}</td>
        <td>{{ rental.expected_return_date|date:"d.m.Y" }}</td>
        <td>{{ rental.rental_amount }} ₽</td>
        <td>{{ rental.discount_amount }} ₽</td>
        <td>{{ rental.total_amount }} ₽</td>
        <td>{{ rental.get_status_display }}</td>
    </tr>
    {% endfor %}
</table>
{% else %}
<p>No pending rentals</p>
{% endif %}
{% endblock %}

{% block cat_fact %}{% endblock %}
{% block news %}{% endblock %}